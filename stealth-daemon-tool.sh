#!/bin/bash
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNdo:+yNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMds:.....-+hNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMms:.....--...--odNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmy:..:o+..+Nh-.:s+--:odMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmy/-.:odNy-.+NMMh--+Nmy+::/sdMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmy+-.:+hNMMh-.+NMMMMy--+NMNmy+::+ymMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMNh+-.-+hmMMMMh-.+NMMMMMMy:-oNMMMNmy+//ohmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMN+:.-/ymMMMMMMh-./NMMMMMMMMy:-oNMMMMMNds+/+sdMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMN/..oMMMMMMMMh-./NMMMMMMMMMMy::sNMMMMMMMm+/+dMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMm/.-hMMMMMMd--/mMMMMMMMMMMMMy::sMMMMMMNs++dMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMm/.-hMMMMd:-/mMMMMMMMMMMMMMMy/:yMMMMNs++dMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm/.-dMMd:-/mMMMMMMMMMMMMMMMMy//yMMNs++dMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm:.-dd:-:mMMMMMMMMMMMMMMMMMMy/+hNs+odMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm:--:-:mMMMMMMMMMMMMMMMMMMMMy++o+odMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm:--:mMMMMMMMMMMMMMMMMMMMMMMy++odMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm:--:mMMMMMMMMMMMMMMMMMMMMMMy+oodMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm/-::-/mMMMMMMMMMMMMMMMMMMMMyoosoodMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMN/-:dd/:/mMMMMMMMMMMMMMMMMMMhoohMyoodMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMm/-:dMMd/:+mMMMMMMMMMMMMMMMMhoohMMNyoodMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMN+-:dMMMMd/:+mMMMMMMMMMMMMMMhoohMMMMNy+odMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMN+-:dMMMMMMm//oNMMMMMMMMMMMMhoohMMMMMMNy+odMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMN+-:sMMMMMMMMd+/oNMMMMMMMMMMdoohMMMMMMMMm++odMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMNs/:/ohNMMMMMMd++sNMMMMMMMMdooyMMMMMMNmyo++sdMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMNds///sdNMMMMd++yNMMMMMMdooyMMMMNmho++shmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNhs+/+ydNMMdooyNMMMMdooyMMMNhs++shmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNhs++oymMdooyMMMmooyNNhs++ohmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNdsooshyooyMdo+ohs++oymMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNdsoooooso++++oymMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNhsoo+++oydMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmhsydNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM STEALTHOVERLORDS MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
echo Welcome!
#website: https://stealth.org
#setting up staker: https://github.com/Stealth-R-D-LLC/Stealth/wiki/Setting-Up-a-StealthNode
#
#                         ### This is not an official tool. Please use it wisely! ###                                                      
#name: StealthTool #version: 0.5a
#dev: mahusar
#                                           ++ STEALTHOVERLORDS ++                                        

command -v jq >/dev/null 2>&1 || { echo >&2 "This tool require jq but it's not installed (i.e. yum install jq). Aborting."; exit 1; }
stealth="/usr/local/bin/StealthCoind -conf=/home/ubuntu/.StealthCoin/StealthCoin.conf"; #set custom path for .conf

echo "Select what you need:"
echo "  1)Purchase staker"
echo "  2)Set staker meta"
echo "  3)Enable staker"
echo "  4)Disable staker"
echo "  5)Claim qpos balance"
echo "  6)Stress feeless"
echo "  7)Staker queue"
echo "  8)Balance repair"
read n
case $n in
#########################################################################################################   #PURCHASE STAKER
  1) echo "You are about to activate purchase staker tool:"
     while true; do
     read -p "Do you wish to continue? y/n: " yn
     case $yn in
        [Yy]* ) echo "Set name for your new staker:"; break;;
        [Nn]* ) exit;;
        * ) echo "Answer yes or no.";;
        esac
        done
        read stakerName
        echo "Set your owner address for $stakerName staker:"
        read ownerAddress
        ownerPubkey=$($stealth validateaddress $ownerAddress | jq -r '.pubkey')
        isMine=$($stealth validateaddress $ownerAddress | jq -r '.ismine')
        echo "ownerAddress: $ownerAddress"
        echo "ownerPubkey: $ownerPubkey"
        echo "ownerAddress is mine: $isMine"
        getPrice=$($stealth getstakerprice)
        echo "Staker price: $getPrice"
        echo "Set price to pay for $stakerName staker,consider to add 10XST as reserve:"
        read feePrice
        echo "Your price is set to: $feePrice"
        while true; do
        read -p "Confirm transaction to $ownerAddress ? y/n: " yn
        case $yn in
        [Yy]* ) sendToAddress=$($stealth sendtoaddress $ownerAddress $feePrice "" "" true); break;;   
        [Nn]* ) exit;;
        * ) echo "Answer yes or no";;
        esac
        done
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg owner_address "$ownerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $owner_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        while true; do
        read -p "You are about to purchase $stakerName staker,do you wish to purchase? y/n: " yn
        case $yn in
        [Yy]* ) purchaseStaker="$stealth purchasestaker $txid $vout $stakerName $ownerPubkey"; break;;
        [Nn]* ) exit;;
        * ) echo "Answer yes or no";;
        esac
        done
        echo "$purchaseStaker"
        purchase=$($purchaseStaker)
        if [[ -z $purchase ]]; then
        echo "Something went wrong with 'purchasestaker' command. Error: $purchaseStaker";
        exit 1;
        fi
        exit 0;;
#########################################################################################################   #SET META
  2) echo "  1)Set staker meta if this wallet is: manager"
     echo "  2)Set staker meta if this wallet is: owner"
     read f
     case $f in
        #################################################################################################
        1)echo "Set staker name:"
        read stakerName
        managerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.manager.address')
        echo "Manager address: $managerAddress"
        validateAddress=$($stealth validateaddress $managerAddress | jq -r '.ismine')
        echo "Manager address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $managerAddress | jq -r '.account')
        echo "Manager address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg manager_address "$managerAddress" '.[] | select(. == $manager_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no manager address '$managerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $managerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg manager_address "$managerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $manager_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        echo "Set staker .onion address:"
        read metaValue
        command="$stealth setstakermeta $txid $vout $stakerName certified_node $metaValue"
        echo "Executing $command"
        executecommand=$($command)
        if [[ -z $executecommand ]]; then
        echo "Something went wrong with command. Error: $executeCommand";
        exit 1;
        fi;;
        #################################################################################################
        2)echo "Set staker name:"
        read stakerName
        ownerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.owner.address')
        echo "Owner address: $ownerAddress"
        validateAddress=$($stealth validateaddress $ownerAddress | jq -r '.ismine')
        echo "Owner address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $ownerAddress | jq -r '.account')
        echo "Owner address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg owner_address "$ownerAddress" '.[] | select(. == $owner_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no owner address '$ownerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $ownerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg owner_address "$ownerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $owner_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        echo "Set staker .onion address:"
        read metaValue
        command="$stealth setstakermeta $txid $vout $stakerName certified_node $metaValue"
        echo "Executing $command"
        executecommand=$($command)
        if [[ -z $executecommand ]]; then
        echo "Something went wrong with command. Error: $executeCommand";
        exit 1;
        fi;;
      esac;;
#########################################################################################################   #ENABLE STAKER
  3) echo "  1)Enable staker if this wallet is: manager"
     echo "  2)Enable staker if this wallet is: owner"
     read e
     case $e in
        #################################################################################################
        1)echo "Set staker name:"
        read stakerName
        managerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.manager.address')
        echo "Manager address: $managerAddress"
        validateAddress=$($stealth validateaddress $managerAddress | jq -r '.ismine')
        echo "Manager address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $managerAddress | jq -r '.account')
        echo "Manager address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg manager_address "$managerAddress" '.[] | select(. == $manager_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no manager address '$managerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $managerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "Executing command $gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg manager_address "$managerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $manager_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
         exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        while true; do
        read -p "Do you wish to enable the staker? y/n: " yn
        case $yn in
        [Yy]* ) enableStaker="$stealth enablestaker $txid $vout $stakerName"; break;;
        [Nn]* ) exit;;
        * ) echo "Answer yes or no";;
        esac
        done
        echo "$enableStaker"
        enable=$($enableStaker)
        if [[ -z $enable ]]; then
        echo "Something went wrong with 'enablestaker' command. Error: $enableStaker";
        exit 1;
        fi
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        echo "Staker enable status: $stakerEnabled"
        while [ $stakerEnabled = false ]
        do
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        done
        echo "Staker enable status: $stakerEnabled"
        exit 0;;
        #################################################################################################
        2)echo "Set staker name:"
        read stakerName
        ownerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.owner.address')
        echo "Owner address: $ownerAddress"
        validateAddress=$($stealth validateaddress $ownerAddress | jq -r '.ismine')
        echo "Owner address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $ownerAddress | jq -r '.account')
        echo "Owner address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg owner_address "$ownerAddress" '.[] | select(. == $owner_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no owner address '$ownerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $ownerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg owner_address "$ownerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $owner_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        while true; do
        read -p "Do you wish to enable the staker? y/n: " yn
        case $yn in
        [Yy]* ) enableStaker="$stealth enablestaker $txid $vout $stakerName"; break;;
        [Nn]* ) exit;;
        * ) echo "Answer yes or no";;
        esac
        done
        echo "$enableStaker"
        enable=$($enableStaker)
        if [[ -z $enable ]]; then
        echo "Something went wrong with 'enablestaker' command. Error: $enableStaker";
        exit 1;
        fi
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        echo "Staker enable status: $stakerEnabled"
        while [ $stakerEnabled = false ]
        do
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        done
        echo "Staker enable status: $stakerEnabled"
        exit 0;;
       esac;;
#########################################################################################################   #DISABLE STAKER
  4) echo "  1)Disable staker if this wallet is: manager"
     echo "  2)Disable staker if this wallet is: owner"
     read d
     case $d in
        #################################################################################################
        1)echo "Set staker name:"
        read stakerName
        managerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.manager.address')
        echo "Manager address: $managerAddress"
        validateAddress=$($stealth validateaddress $managerAddress | jq -r '.ismine')
        echo "Manager address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $managerAddress | jq -r '.account')
        echo "Manager address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg manager_address "$managerAddress" '.[] | select(. == $manager_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no manager address '$managerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $managerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "Executing command $gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg manager_address "$managerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $manager_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        while true; do
        read -p "You can re-enable staker after 12hrs.Do you wish to disable the staker? y/n: " yn
        case $yn in
        [Yy]* ) disableStaker="$stealth disablestaker $txid $vout $stakerName"; break;;
        [Nn]* ) exit;;
        * ) echo "Answer yes or no";;
        esac
        done
        echo "$disableStaker"
        disable=$($enableStaker)
        if [[ -z $disable ]]; then
        echo "Something went wrong with 'disablestaker' command. Error: $disableStaker";
        exit 1;
        fi
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        echo "Staker enable status: $stakerEnabled"
        while [ $stakerEnabled = true ]
        do
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        done
        echo "Staker enable status: $stakerEnabled"
        exit 0;;
        #################################################################################################
        2)echo "Set staker name:"
        read stakerName
        ownerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.owner.address')
        echo "Owner address: $ownerAddress"
        validateAddress=$($stealth validateaddress $ownerAddress | jq -r '.ismine')
        echo "Owner address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $ownerAddress | jq -r '.account')
        echo "Owner address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg owner_address "$ownerAddress" '.[] | select(. == $owner_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no owner address '$ownerAddress' in the local wallet or account '
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $ownerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg owner_address "$ownerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $owner_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        while true; do
        read -p "You can re-enable staker after 12hrs.Do you wish to disable the staker? y/n: " yn
        case $yn in
        [Yy]* ) disableStaker="$stealth disablestaker $txid $vout $stakerName"; break;;
        [Nn]* ) exit;;
        * ) echo "Answer yes or no";;
        esac
        done
        echo "$disableStaker"
        disable=$($enableStaker)
        if [[ -z $disable ]]; then
        echo "Something went wrong with 'disablestaker' command. Error: $disableStaker";
        exit 1;
        fi
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        echo "Staker enable status: $stakerEnabled"
        while [ $stakerEnabled = true ]
        do
        stakerEnabled=$($stealth getstakerinfo $stakerName | jq -r '.enabled')
        done
        echo "Staker enable status: $stakerEnabled"
        exit 0;;
       esac;;
######################################################################################################### #CLAIM QPOS BALANCE
  5) echo "  1)Claim qpos balance if this wallet is: manager"
     echo "  2)Claim qpos balance if this wallet is: owner"
     read f
     case $f in
        #################################################################################################
        1)echo "Set staker name:"
        read stakerName
        managerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.manager.address')
        echo "Manager address: $managerAddress"
        validateAddress=$($stealth validateaddress $managerAddress | jq -r '.ismine')
        echo "Manager address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $managerAddress | jq -r '.account')
        echo "Manager address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg manager_address "$managerAddress" '.[] | select(. == $manager_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no manager address '$managerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $managerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg manager_address "$managerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $manager_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        echo "Set balance to claim:"
        read claimAmount
        command="$stealth claimqposbalance $txid $vout $claimAmount"
        echo "Executing $command"
        executecommand=$($command)
        if [[ -z $executecommand ]]; then
        echo "Something went wrong with command. Error: $executeCommand";
        exit 1;
        fi;;
        ##################################################################################################
        2)echo "Set staker name:"
        read stakerName
        ownerAddress=$($stealth getstakerauthorities $stakerName | jq -r '.owner.address')
        echo "Owner address: $ownerAddress"
        validateAddress=$($stealth validateaddress $ownerAddress | jq -r '.ismine')
        echo "Owner address is mine: $validateAddress"
        validateAccount=$($stealth validateaddress $ownerAddress | jq -r '.account')
        echo "Owner address account: $validateAccount"
        hasOwnerAddressInAccount=$($stealth getaddressesbyaccount $validateAccount | jq -r --arg owner_address "$ownerAddress" '.[] | select(. == $owner_address)')
        if [[ -z $hasOwnerAddressInAccount ]]; then
        echo 'There is no owner address '$ownerAddress' in the local wallet or account'
        exit 1;
        fi
        sendToAddress=$($stealth sendtoaddress $ownerAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "Txid: $txid"
        gettx="$stealth gettransaction $txid"
        echo "$gettx"
        txinfo=$($gettx)
        vout=$(echo $txinfo | jq -r --arg owner_address "$ownerAddress" '.vout[] | select(.scriptPubKey.addresses[0] == $owner_address) | .n')
        echo "vout: $vout"
        if [[ -z $vout ]]; then
        echo "Invalid vout. Received: $vout"
        exit 1;
        fi
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        echo "Confirmations number: $confirmations"
        while [ $confirmations = 0 ]
        do
        confirmations=$($stealth gettransaction $txid | jq -r '.confirmations')
        done
        echo "Confirmations number: $confirmations"
        echo "Set balance to claim:"
        read claimAmount
        command="$stealth claimqposbalance $txid $vout $claimAmount"
        echo "Executing $command"
        executecommand=$($command)
        if [[ -z $executecommand ]]; then
        echo "Something went wrong with command. Error: $executeCommand";
        exit 1;
        fi;;
      esac;;
########################################################################################################  #STRESS FEELESS
  6) echo "  1)Use stress mode: normal"
     echo "  2)Use stress mode: hardcore"
     read s
     case $s in
        ################################################################################################ #1
      1)echo "Normal mode"
        echo "Set address to send 0.01 feeless:"
        read feeWorkAddress
        echo "Set pause in seconds(number):"
        read pause
        echo "Set runtime in minutes(number):"
        read run
        runtime=""$run" minute"
        endtime=$(date -ud "$runtime" +%s)
        echo "Stress feeless activated"
        while [[ $(date -u +%s) -le $endtime ]]
        do
        sleep $pause
        echo "Time: `date +%H:%M:%S`"
        echo "Pause for "$pause" seconds,runtime for "$run" minutes"
        sendToAddress=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
        txid="$sendToAddress"
        echo "txid: "$txid" "
        echo "Feework action"
        done;;
        ################################################################################################  #HARDCORE
      2) echo "  Hardcore mode"
         echo "  1)Send  5 transactions at once to 1 address"
         echo "  2)Send 10 transactions at once to 1 address"
         echo "  3)Send 20 transactions at once to 2 addresses (2x10)"
         read l
         case $l in
         ############################################################################################## #5
         1)echo "Set address to send 0.05 feeless:"
           read feeWorkAddress
           echo "Set pause in seconds(number):"
           read pause
           echo "Set runtime in minutes(number):"
           read run
           runtime=""$run" minute"
           endtime=$(date -ud "$runtime" +%s)
           echo "Stress feeless activated"
           while [[ $(date -u +%s) -le $endtime ]]
           do
           sleep $pause
           echo "Time: `date +%H:%M:%S`"
           echo "Pause for "$pause" seconds,runtime for "$run" minutes"
           sendToAddress1=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid1="$sendToAddress1"
           sendToAddress2=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid2="$sendToAddress2"
           sendToAddress3=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid3="$sendToAddress3"
           sendToAddress4=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid4="$sendToAddress4"
           sendToAddress5=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid5="$sendToAddress5"
           echo "txid1: "$txid1" "
           echo "txid2: "$txid2" "
           echo "txid3: "$txid3" "
           echo "txid4: "$txid4" "
           echo "txid5: "$txid5" "
           echo "Feework action"
           done;;
         ############################################################################################## #10
         2)echo "Set address to send 0.10 feeless"
           read feeWorkAddress
           echo "Set pause in seconds(number):"
           read pause
           echo "Set runtime in minutes(number):"
           read run
           runtime=""$run" minute"
           endtime=$(date -ud "$runtime" +%s)
           echo "Stress feeless activated"
           while [[ $(date -u +%s) -le $endtime ]]
           do
           sleep $pause
           echo "Time: `date +%H:%M:%S`"
           echo "Pause for "$pause" seconds,runtime for "$run" minutes"
           sendToAddress1=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid1="$sendToAddress1"
           sendToAddress2=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid2="$sendToAddress2"
           sendToAddress3=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid3="$sendToAddress3"
           sendToAddress4=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid4="$sendToAddress4"
           sendToAddress5=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid5="$sendToAddress5"
           sendToAddress6=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid6="$sendToAddress6"
           sendToAddress7=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid7="$sendToAddress7"
           sendToAddress8=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid8="$sendToAddress8"
           sendToAddress9=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid9="$sendToAddress9"
           sendToAddress10=$($stealth sendtoaddress $feeWorkAddress 0.01 "" "" true)
           txid10="$sendToAddress10"
           echo "txid1: "$txid1" "
           echo "txid2: "$txid2" "
           echo "txid3: "$txid3" "
           echo "txid4: "$txid4" "
           echo "txid5: "$txid5" "
           echo "txid6: "$txid6" "
           echo "txid7: "$txid7" "
           echo "txid8: "$txid8" "
           echo "txid9: "$txid9" "
           echo "txid10: "$txid10" "
           echo "Feework action"
           done;;
         ############################################################################################# #20
         3)echo "Set address 1 to send 0.10 feeless"
           read feeWorkAddress1
           echo "Set address 2 to send 0.10 feeless"
           read feeWorkAddress2
           echo "Set pause in seconds(number):"
           read pause
           echo "Set runtime in minutes(number):"
           read run
           runtime=""$run" minute"
           endtime=$(date -ud "$runtime" +%s)
           echo "Stress feeless activated"
           while [[ $(date -u +%s) -le $endtime ]]
           do
           sleep $pause
           echo "Time: `date +%H:%M:%S`"
           echo "Pause for "$pause" seconds,runtime for "$run" minutes"
           echo "Transactions to: $feeWorkAddress1"
           sendToAddress1=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid1="$sendToAddress1"
           sendToAddress2=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid2="$sendToAddress2"
           sendToAddress3=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid3="$sendToAddress3"
           sendToAddress4=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid4="$sendToAddress4"
           sendToAddress5=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid5="$sendToAddress5"
           sendToAddress6=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid6="$sendToAddress6"
           sendToAddress7=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid7="$sendToAddress7"
           sendToAddress8=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid8="$sendToAddress8"
           sendToAddress9=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid9="$sendToAddress9"
           sendToAddress10=$($stealth sendtoaddress $feeWorkAddress1 0.01 "" "" true)
           txid10="$sendToAddress10"
           echo "txid1: "$txid1" "
           echo "txid2: "$txid2" "
           echo "txid3: "$txid3" "
           echo "txid4: "$txid4" "
           echo "txid5: "$txid5" "
           echo "txid6: "$txid6" "
           echo "txid7: "$txid7" "
           echo "txid8: "$txid8" "
           echo "txid9: "$txid9" "
           echo "txid10: "$txid10" "
           echo "Transactions to: $feeWorkAddress2"
           sendToAddress11=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid11="$sendToAddress11"
           sendToAddress12=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid12="$sendToAddress12"
           sendToAddress13=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid13="$sendToAddress13"
           sendToAddress14=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid14="$sendToAddress14"
           sendToAddress15=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid15="$sendToAddress15"
           sendToAddress16=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid16="$sendToAddress16"
           sendToAddress17=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid17="$sendToAddress17"
           sendToAddress18=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid18="$sendToAddress18"
           sendToAddress19=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)      
           txid19="$sendToAddress19"
           sendToAddress20=$($stealth sendtoaddress $feeWorkAddress2 0.01 "" "" true)
           txid20="$sendToAddress20"
           echo "txid11: "$txid11" "
           echo "txid12: "$txid12" "
           echo "txid13: "$txid13" "
           echo "txid14: "$txid14" "
           echo "txid15: "$txid15" "
           echo "txid16: "$txid16" "
           echo "txid17: "$txid17" "
           echo "txid18: "$txid18" "
           echo "txid19: "$txid19" "
           echo "txid20: "$txid20" "
           echo "Feework action"
           done;;
        esac
    esac;;
########################################################################################################  # STAKER QUEUE
  7) echo "Locate your staker queue"
     echo "First number is the order.Second is the StakerID.Each “o” is 5 seconds in the future."
     echo "Set staker name:"
     read stakerName
     getStakerID=$($stealth getstakerinfo $stakerName | jq -r '.id')
     echo "StakerID: $getStakerID"
     getCurrentslot=$($stealth getqueuesummary)
     echo "Queue: $getCurrentslot";;
########################################################################################################  # CORRUPT BALANCE FIX
  8) echo "Balance repair"
     echo "Let action active until is finished"
     while true; do
     read -p "Start fix? y/n: " yn
     case $yn in
     [Yy]* ) repairWallet=$($stealth repairwallet); break;;
     [Nn]* ) exit;;
     * ) echo "Answer yes or no";;
     esac
     done
     echo "$repairWallet"
     while true; do
     read -p "Rescan all transactions? (let it run) y/n: " yn
     case $yn in
     [Yy]* ) clearWallet=$($stealth clearwallettransactions); break;;
     [Nn]* ) exit;;
     * ) echo "Answer yes or no";;
     esac
     done
     echo "$clearWallet"
     scanWallet=$($stealth scanforalltxns)
     echo "$scanWallet";;
########################################################################################################  # TESTING
  9) echo "Testing";;
  
  *) echo "Invalid";;
esac
